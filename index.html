<!DOCTYPE html>
<html>
    <head>
        <title>Leaflet.ShadowWrap Example</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link type="text/css" rel="stylesheet" href="lib/leaflet.css" />
        <link type="text/css" rel="stylesheet" href="lib/leaflet.draw.css" />
        <script type="text/javascript" src="lib/leaflet.js"></script>
        <script type="text/javascript" src="lib/leaflet.draw.js"></script>
        
        <script type="text/javascript" src="leaflet.shadowwrap.js"></script>
    </head>
    
    <body>
        <div id="map" style="height:400px; width: 500px;"></div>
        
        <script>
        L.ShadowWrap.initialize();
        
        var map = L.map('map', {
            worldCopyJump: true
        }).setView([10.8, -155.7], 2);

        //  OSM tiles
        L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18
        }).addTo(map);
        
        var drawnItems = L.featureGroup([]);
        drawnItems.addTo(map);
        var guideLayers = [];
        
        var drawControl = new L.Control.Draw({
            edit: {
                featureGroup: drawnItems,
                poly : {
                    allowIntersection : true
                }
            },
            draw: {
                polygon : {
                    allowIntersection: true,
                    showArea: true
                },
            }
        });
        
        map.addControl(drawControl);
        
        // add a dateline
        var x1 = new L.Rectangle([[-88, 179.75], [88, 179.99]], {
            'noShadow': true,
            'color': 'black',
            'opacity': 0.3
        }).addTo(map);
        var x2 = new L.Rectangle([[-88, -179.75], [88, -179.99]], {
            'noShadow': true,
            'color': 'black',
            'opacity': 0.3
        }).addTo(map);

        // add a few default shapes to be manipulable by leaflet draw
        var aus_marker = L.marker([-29.5, 143]);
        aus_marker.bindPopup('-29.5, 143');

        var us_marker = L.marker([35.5, -119]);
        us_marker.bindPopup('35.5, -123');
        
        var r = new L.Rectangle([[-29.5, -139], [35.5, 153]]);
        var c = new L.Circle([-29, -177], 2000000);
        
        var initialLayers = [aus_marker, us_marker, r, c];
        L.ShadowWrap.hookLeafletDraw(drawnItems, [], initialLayers);
        
        </script>
    </body>
</html>